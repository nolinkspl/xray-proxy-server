# üì¶ Xray Wi-Fi Gateway Setup

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ Wi-Fi-–ø—Ä–æ–∫—Å–∏ —Å —Ç—É–Ω–Ω–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ç—Ä–∞—Ñ–∏–∫–∞ —á–µ—Ä–µ–∑ Xray (sing-box).

–°–∫—Ä–∏–ø—Ç:
- —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç **sing-box** –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥ –ø–æ —Å—Å—ã–ª–∫–µ `vmess://`, `vless://` –∏–ª–∏ `trojan://`
- —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø–∞ (**hostapd**) –∏ DHCP (**dnsmasq**)
- –ø—Ä–æ–∫–∏–¥—ã–≤–∞–µ—Ç –≤–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ —á–µ—Ä–µ–∑ **tun0**-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç **iptables**, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç **DNS**, –∑–∞–ø—É—Å–∫–∞–µ—Ç **systemd-—Å–µ—Ä–≤–∏—Å—ã**
- ‚ö° —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π: `amd64`, `arm64` (–Ω–∞–ø—Ä–∏–º–µ—Ä, Orange Pi, Raspberry Pi)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å Linux (Ubuntu 22/24+)

```bash
git clone https://github.com/your-user/xray-wifi-proxy.git
cd xray-wifi-proxy
```

### 2. –ó–∞–ø—É—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–∫—É

```bash
bash setup.sh
```

### 3. –û—Ç–≤–µ—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:

- üîó –í—Å—Ç–∞–≤—å Xray —Å—Å—ã–ª–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä: `vless://uuid@ip:port?...`)
- üì° –í—ã–±–µ—Ä–∏ Wi-Fi –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä `wlan0`)
- üì∂ –í–≤–µ–¥–∏ –∏–º—è Wi-Fi —Å–µ—Ç–∏ (SSID), –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `TunnelNet`
- üîê –í–≤–µ–¥–∏ –ø–∞—Ä–æ–ª—å Wi-Fi, –º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `tunnelproxy`)

---

## ‚úÖ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç `setup.sh`

- –°–∫–∞—á–∏–≤–∞–µ—Ç –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `sing-box` –≤–µ—Ä—Å–∏–∏ **1.11.8**
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥ `/etc/sing-box/config.json` —Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π —Ç—Ä–∞—Ñ–∏–∫–∞
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `dnsmasq`, `hostapd`, `iptables`, –≤–∫–ª—é—á–∞–µ—Ç **IP —Ñ–æ—Ä–≤–∞—Ä–¥–∏–Ω–≥**
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥–∏ Wi-Fi –∏ DHCP –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É –∏ –∏–º–µ–Ω–∏ —Å–µ—Ç–∏
- –°–æ–∑–¥–∞—ë—Ç `systemd`-—Å–µ—Ä–≤–∏—Å `init-tunnel.service` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- –ü—Ä–æ–ø–∏—Å—ã–≤–∞–µ—Ç `nameserver 1.1.1.1` –∏ –∑–∞—â–∏—â–∞–µ—Ç `/etc/resolv.conf`
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å—ë —á–µ—Ä–µ–∑ `systemctl enable ...` –∏ —Å—Ç–∞—Ä—Ç—É–µ—Ç

---

## üõ† –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Ubuntu 22.04 –∏–ª–∏ 24.04 (–±–µ–∑ GUI)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **tun** (`/dev/net/tun`, `net.ipv4.ip_forward = 1`)
- Wi-Fi –∞–¥–∞–ø—Ç–µ—Ä —Å —Ä–µ–∂–∏–º–æ–º **—Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞ (AP mode)**
- –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–¥–æ—Å—Ç—É–ø –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ

---

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- –í—Å–µ –∫–æ–Ω—Ñ–∏–≥–∏ (`sing-box`, `dnsmasq`, `hostapd`) –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è **–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏**
- –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ –≤—Å—ë –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**
- –î–ª—è —Å–º–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫: —É–¥–∞–ª–∏ `systemd`-—Å–µ—Ä–≤–∏—Å—ã –∏ –∑–∞–ø—É—Å—Ç–∏ `setup.sh` –∑–∞–Ω–æ–≤–æ

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```text
setup.sh                 # –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç: —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç URL, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, SSID
setup-sing-box.sh        # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç sing-box –∏ —Å–æ–∑–¥–∞—ë—Ç config.json
install-gateway.sh       # –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç Wi-Fi, DHCP, iptables, systemd
init-tunnel.sh           # –ù–∞–∑–Ω–∞—á–∞–µ—Ç IP –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É, —Ä–µ—Å—Ç–∞—Ä—Ç—É–µ—Ç dnsmasq
prepare-wifi.sh          # –û—Ç–∫–ª—é—á–∞–µ—Ç NetworkManager, rfkill, wpa_supplicant
```

---

## üê≥ Docker (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ)

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ —á–µ—Ä–µ–∑ `Dockerfile` —Å –∫–æ–Ω—Ñ–∏–≥–æ–º –∏–∑ `proxy.ini`:

```ini
url = vless://uuid@ip:port?...    # Xray URL
iface = wlan0                     # Wi-Fi –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
ssid = TunnelNet                  # –ò–º—è —Å–µ—Ç–∏
passphrase = tunnelproxy          # –ü–∞—Ä–æ–ª—å
```

```bash
docker build -t singbox-gateway .
docker run --privileged --cap-add=NET_ADMIN --device /dev/net/tun -it singbox-gateway
```

> ‚ùó –í Docker Wi-Fi –æ–±—ã—á–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∞ —Ç—É–Ω–Ω–µ–ª—è.

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- –ï—Å–ª–∏ `setup.sh` –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç ‚Äî –ø—Ä–æ–≤–µ—Ä—å, –Ω–µ—Ç –ª–∏ `exit` –≤–Ω—É—Ç—Ä–∏ `setup-sing-box.sh`
- –ï—Å–ª–∏ Wi-Fi –Ω–µ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è ‚Äî –ø—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –∞–¥–∞–ø—Ç–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **AP Mode** (`iw list`)
- –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç DNS ‚Äî –ø—Ä–æ–≤–µ—Ä—å `/etc/resolv.conf`, –æ—Ç–∫–ª—é—á–∏ `systemd-resolved`
- –ï—Å–ª–∏ —Ç—É–Ω–Ω–µ–ª—å –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç ‚Äî –ø—Ä–æ–≤–µ—Ä—å `systemctl status sing-box`

---

‚úÖ –ì–æ—Ç–æ–≤–æ! –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Ç–µ–ø–µ—Ä—å —Ä–∞–∑–¥–∞—ë—Ç Wi-Fi —Å —Ç—É–Ω–Ω–µ–ª–µ–º —á–µ—Ä–µ–∑ Xray.

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –ª—é–±—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å ARM –∏–ª–∏ x86 –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π.
